{% extends "base.html" %}

{% block title %}Chi tiết bài đăng chờ duyệt{% endblock %}

{% block content %}
<div class="post-detail-container">
    <div class="row justify-content-center">
        <div class="col-lg-10 col-xl-8">
            <!-- Header Card -->
            <div class="card shadow-lg border-0 mb-4">
                <div class="card-header bg-gradient-warning text-white py-4">
                    <div class="d-flex align-items-center justify-content-between">
                        <div class="d-flex align-items-center">
                            <div class="header-icon me-3">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div>
                                <h3 class="mb-1 fw-bold">Chi tiết bài đăng chờ duyệt</h3>
                                <small class="opacity-75">ID: {{ post.house_id }} • Ngày đăng: {{ post.PostingDate }}</small>
                            </div>
                        </div>
                        <span class="badge bg-white text-warning rounded-pill px-3 py-2 fw-bold">
                            <i class="fas fa-hourglass-half me-1"></i>
                            Chờ duyệt
                        </span>
                    </div>
                </div>
            </div>

            <!-- Main Content Card -->
            <div class="card shadow-lg border-0">
                <div class="card-body p-4">
                    <!-- Title Section -->
                    <div class="title-section mb-5">
                        <div class="d-flex align-items-start gap-3">
                            <div class="title-icon">
                                <i class="fas fa-home"></i>
                            </div>
                            <div class="flex-grow-1">
                                <h2 class="property-title mb-2">{{ post.Title }}</h2>
                                <div class="property-meta">
                                    <span class="meta-item">
                                        <i class="fas fa-map-marker-alt text-danger me-1"></i>
                                        {{ post.Address }}
                                    </span>
                                    <span class="meta-item">
                                        <i class="fas fa-building text-info me-1"></i>
                                        {{ post.District }}
                                    </span>
                                    <span class="meta-item">
                                        <i class="fas fa-tag text-success me-1"></i>
                                        {{ post.PostType }}
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Information Sections -->
                    <div class="information-grid">
                        <!-- Pricing & Area Section -->
                        <div class="info-section mb-5">
                            <div class="section-header mb-4">
                                <h4 class="section-title">
                                    <i class="fas fa-money-bill-wave text-success me-2"></i>
                                    Thông tin giá và diện tích
                                </h4>
                                <div class="section-line bg-success"></div>
                            </div>
                            
                            <div class="row g-4">
                                <div class="col-md-6">
                                    <div class="info-card price-card">
                                        <div class="info-icon">
                                            <i class="fas fa-dollar-sign"></i>
                                        </div>
                                        <div class="info-content">
                                            <span class="info-label">Giá</span>
                                            <span class="info-value text-success fw-bold">{{ post.price }}</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6">
                                    <div class="info-card area-card">
                                        <div class="info-icon">
                                            <i class="fas fa-ruler-combined"></i>
                                        </div>
                                        <div class="info-content">
                                            <span class="info-label">Diện tích</span>
                                            <span class="info-value text-warning fw-bold">{{ post.Area }} m²</span>
                                        </div>
                                    </div>
                                </div>
                                
                                {% if post.Direction %}
                                <div class="col-md-6">
                                    <div class="info-card direction-card">
                                        <div class="info-icon">
                                            <i class="fas fa-compass"></i>
                                        </div>
                                        <div class="info-content">
                                            <span class="info-label">Hướng nhà</span>
                                            <span class="info-value text-info fw-bold">{{ post.Direction }}</span>
                                        </div>
                                    </div>
                                </div>
                                {% endif %}
                                
                                <div class="col-md-6">
                                    <div class="info-card width-card">
                                        <div class="info-icon">
                                            <i class="fas fa-arrows-alt-h"></i>
                                        </div>
                                        <div class="info-content">
                                            <span class="info-label">Chiều rộng</span>
                                            <span class="info-value text-primary fw-bold">{{ post.Width_meters }} m</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Room Information Section -->
                        <div class="info-section mb-5">
                            <div class="section-header mb-4">
                                <h4 class="section-title">
                                    <i class="fas fa-home text-primary me-2"></i>
                                    Thông tin phòng
                                </h4>
                                <div class="section-line bg-primary"></div>
                            </div>
                            
                            <div class="row g-4">
                                <div class="col-md-4">
                                    <div class="info-card bedroom-card">
                                        <div class="info-icon">
                                            <i class="fas fa-bed"></i>
                                        </div>
                                        <div class="info-content">
                                            <span class="info-label">Phòng ngủ</span>
                                            <span class="info-value text-primary fw-bold">{{ post.Bedrooms }}</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-4">
                                    <div class="info-card bathroom-card">
                                        <div class="info-icon">
                                            <i class="fas fa-bath"></i>
                                        </div>
                                        <div class="info-content">
                                            <span class="info-label">Phòng tắm</span>
                                            <span class="info-value text-info fw-bold">{{ post.Bathrooms }}</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-4">
                                    <div class="info-card floor-card">
                                        <div class="info-icon">
                                            <i class="fas fa-layer-group"></i>
                                        </div>
                                        <div class="info-content">
                                            <span class="info-label">Số tầng</span>
                                            <span class="info-value text-warning fw-bold">{{ post.Floors }}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Legal & Features Section -->
                        <div class="info-section mb-5">
                            <div class="section-header mb-4">
                                <h4 class="section-title">
                                    <i class="fas fa-clipboard-list text-info me-2"></i>
                                    Thông tin pháp lý & tiện nghi
                                </h4>
                                <div class="section-line bg-info"></div>
                            </div>
                            
                            <div class="row g-4">
                                <div class="col-md-6">
                                    <div class="info-card legal-card">
                                        <div class="info-icon">
                                            <i class="fas fa-certificate"></i>
                                        </div>
                                        <div class="info-content">
                                            <span class="info-label">Giấy tờ pháp lý</span>
                                            <span class="info-value text-success fw-bold">{{ post.Legal }}</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6">
                                    <div class="info-card interior-card">
                                        <div class="info-icon">
                                            <i class="fas fa-couch"></i>
                                        </div>
                                        <div class="info-content">
                                            <span class="info-label">Nội thất</span>
                                            <span class="info-value text-purple fw-bold">{{ post.Interior }}</span>
                                        </div>
                                    </div>
                                </div>
                                
                                {% if post.Entrancewidth %}
                                <div class="col-md-6">
                                    <div class="info-card entrance-card">
                                        <div class="info-icon">
                                            <i class="fas fa-door-open"></i>
                                        </div>
                                        <div class="info-content">
                                            <span class="info-label">Lối vào</span>
                                            <span class="info-value text-secondary fw-bold">{{ post.Entrancewidth }} m</span>
                                        </div>
                                    </div>
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Footer -->
                <div class="card-footer bg-light border-0 py-4">
                    <div class="d-flex justify-content-between align-items-center">
                        <a href="{{ url_for('admin_approve_posts') }}" class="btn btn-outline-secondary btn-lg">
                            <i class="fas fa-arrow-left me-2"></i>
                            Quay lại danh sách
                        </a>
                        
                        <div class="action-buttons">
                            <form action="{{ url_for('approve_post', house_id=post.house_id) }}" 
                                  method="POST" class="d-inline me-2">
                                <button type="submit" class="btn btn-success btn-lg px-4" 
                                        onclick="return confirm('✅ Phê duyệt bài đăng này?\n\nBài đăng sẽ được hiển thị công khai trên website.')">
                                    <i class="fas fa-check me-2"></i>
                                    Phê duyệt
                                </button>
                            </form>
                            
                            <form action="{{ url_for('reject_post', house_id=post.house_id) }}" 
                                  method="POST" class="d-inline">
                                <button type="submit" class="btn btn-danger btn-lg px-4" 
                                        onclick="return confirm('❌ Từ chối bài đăng này?\n\nBài đăng sẽ bị xóa khỏi hệ thống.')">
                                    <i class="fas fa-times me-2"></i>
                                    Từ chối
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.bg-gradient-warning {
    background: linear-gradient(135deg, #ffc107, #fd7e14) !important;
}

.header-icon {
    width: 50px;
    height: 50px;
    background: rgba(255,255,255,0.2);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
}

.title-section {
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
    border-radius: 15px;
    padding: 2rem;
}

.title-icon {
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    border-radius: 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
}

.property-title {
    color: #2c3e50;
    font-weight: 700;
    margin-bottom: 1rem;
}

.property-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 1.5rem;
    margin-top: 1rem;
}

.meta-item {
    background: white;
    padding: 0.5rem 1rem;
    border-radius: 20px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    font-weight: 500;
    font-size: 0.9rem;
}

.section-header {
    position: relative;
    margin-bottom: 2rem;
}

.section-title {
    color: #2c3e50;
    font-weight: 600;
    margin-bottom: 0.5rem;
}

.section-line {
    height: 3px;
    border-radius: 2px;
    width: 60px;
}

.info-card {
    background: white;
    border: 1px solid #e3e6f0;
    border-radius: 15px;
    padding: 1.5rem;
    display: flex;
    align-items: center;
    gap: 1rem;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0,0,0,0.05);
}

.info-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.1);
}

.info-icon {
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
}

.price-card .info-icon {
    background: linear-gradient(135deg, #28a745, #20c997);
}

.area-card .info-icon {
    background: linear-gradient(135deg, #ffc107, #fd7e14);
}

.direction-card .info-icon {
    background: linear-gradient(135deg, #17a2b8, #6f42c1);
}

.bedroom-card .info-icon {
    background: linear-gradient(135deg, #007bff, #6610f2);
}

.bathroom-card .info-icon {
    background: linear-gradient(135deg, #17a2b8, #20c997);
}

.floor-card .info-icon {
    background: linear-gradient(135deg, #ffc107, #e83e8c);
}

.legal-card .info-icon {
    background: linear-gradient(135deg, #28a745, #17a2b8);
}

.interior-card .info-icon {
    background: linear-gradient(135deg, #6f42c1, #e83e8c);
}

.entrance-card .info-icon {
    background: linear-gradient(135deg, #6c757d, #495057);
}

.info-content {
    display: flex;
    flex-direction: column;
    flex-grow: 1;
}

.info-label {
    font-size: 0.9rem;
    color: #6c757d;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 0.25rem;
}

.info-value {
    font-size: 1.2rem;
    color: #2c3e50;
}

.text-purple {
    color: #6f42c1 !important;
}

.action-buttons {
    display: flex;
    gap: 0.5rem;
}

/* Responsive improvements */
@media (max-width: 768px) {
    .title-section {
        padding: 1.5rem;
    }
    
    .property-meta {
        flex-direction: column;
        gap: 0.75rem;
    }
    
    .info-card {
        padding: 1rem;
        flex-direction: column;
        text-align: center;
    }
    
    .info-icon {
        width: 40px;
        height: 40px;
        font-size: 1rem;
    }
    
    .action-buttons {
        flex-direction: column;
        width: 100%;
    }
    
    .btn-lg {
        width: 100%;
        margin: 0.25rem 0;
    }
}

/* Animation effects */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.info-section {
    animation: fadeInUp 0.6s ease-out;
}

.info-section:nth-child(2) {
    animation-delay: 0.1s;
}

.info-section:nth-child(3) {
    animation-delay: 0.2s;
}
</style>

<script>
// Add loading state to action buttons
document.querySelectorAll('form button').forEach(button => {
    button.addEventListener('click', function(e) {
        const isApprove = this.classList.contains('btn-success');
        const confirmMsg = this.getAttribute('onclick').match(/'([^']+)'/)[1];
        
        if (confirm(confirmMsg)) {
            this.innerHTML = isApprove ? 
                '<i class="fas fa-spinner fa-spin me-2"></i>Đang phê duyệt...' : 
                '<i class="fas fa-spinner fa-spin me-2"></i>Đang từ chối...';
            this.disabled = true;
        }
    });
});

// Add smooth scroll to top when navigating back
document.querySelector('.btn-outline-secondary').addEventListener('click', function() {
    window.scrollTo({ top: 0, behavior: 'smooth' });
});
</script>
{% endblock %}
